var app=angular.module("app",[]);app.controller("newsController",["$scope","$log","$httpService",function($scope,$log,httpService){$scope.news={data:null,limitBrasil:1,limitMundo:1,moreBrasil:function(){this.limitBrasil++},moreMundo:function(){this.limitMundo++}};var getNews=function(){httpService.getNews(function(response){response&&response.data&&($scope.news.data=formatNews(response.data.section))},function(response){$log.error(response)})},formatNews=function(section){try{if(section&&section.length>0){var i,tmp,news={mainTop:[],mainMiddle:[],mainDefault:[],brasil:[],mundo:[]};return angular.forEach(section,function(value,key){switch(value.name){case"main":for(i=0;i<value.data.length;i++)0===i||1==i?news.mainTop.push(value.data[i]):2==i||3==i?news.mainMiddle.push(value.data[i]):news.mainDefault.push(value.data[i]);break;case"Brasil":for(tmp=[],i=0;i<value.data.length;i++)tmp.push(value.data[i]),4==tmp.length&&(news.brasil.push(tmp),tmp=[]);break;case"Mundo":for(tmp=[],i=0;i<value.data.length;i++)tmp.push(value.data[i]),4==tmp.length&&(news.mundo.push(tmp),tmp=[]);break;default:$log.info("Section not identified.")}}),news}return $log.warn("Data section not found."),null}catch(err){console.log(err.message)}};!function(){getNews()}()}]),app.directive("dlMenu",["$timeout",function($timeout){return{restrict:"E",link:function($scope,iElm,iAttrs,controller){$timeout(function(){iElm.dlmenu({animationClasses:{classin:"dl-animate-in-2",classout:"dl-animate-out-2"}})},0)}}}]),app.directive("newsDefault",["$log","$timeout",function($log,$timeout){return{scope:{news:"=",index:"="},restrict:"EA",templateUrl:"assets/template/news-default.html",link:function($scope,iElm,iAttrs,controller){$timeout(function(){angular.element(".news-box").fadeIn(1e3)},0)}}}]),app.directive("newsMain",["$log","$timeout",function($log,$timeout){return{scope:{type:"=",news:"="},controller:function($scope,$element,$attrs,$transclude){$scope.shareSomething=function($event){$event.preventDefault(),$log.info("share something amazing...")}},restrict:"EA",templateUrl:"assets/template/news-main.html",link:function($scope,iElm,iAttrs,controller){$timeout(function(){angular.element(".news-main-"+$scope.type+"-box").fadeIn(1e3)},0)}}}]),app.service("$httpService",["$http",function($http){"use strict";return{getNews:function(successCallback,errorCallback){$http.get("./data.json",{}).then(successCallback,errorCallback)}}}]);